{{ define "exam-result" }}
<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hasil Ujian | SayGenFix</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/lucide@0.395.0/dist/umd/lucide.min.js"></script>

    <link rel="stylesheet" href="/css/student_dashboard.css">

    <style>
        /* CSS di sini sekarang hanya berisi style yang SPESIFIK 
        untuk halaman hasil ujian. Style umum sudah diambil dari student_dashboard.css.
        */

        body {
            background-image: url('/path/ke/wpp.jpg');
            /* Pastikan path ini benar */
            background-repeat: no-repeat;
            background-position: top left;
            background-size: contain;
        }

        /* -- PERUBAHAN CSS UNTUK HEADER BARU -- */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--abu-muda);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            /* Memberi jarak ke section skor */
        }

        .student-exam-info {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .exam-room-name {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--teks-abu);
        }

        /* -- AKHIR PERUBAHAN CSS -- */

        /* SCORE SUMMARY SECTION */
        .score-summary {
            background-color: var(--abu-muda);
            /* Menggunakan variabel dari CSS utama */
            border-radius: 1rem;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 2.5rem;
        }

        .score-circle-container {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            padding: 15px;
            background: conic-gradient(var(--biru-muda) var(--progress-value, 0deg),
                    var(--abu-gelap) 0deg);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background 0.5s ease-out;
        }

        .score-circle-inner {
            width: 100%;
            height: 100%;
            background-color: var(--abu-muda);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .score-text {
            text-align: center;
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: 700;
        }

        .score-value span {
            font-size: 1.5rem;
            font-weight: 400;
            opacity: 0.8;
        }

        .score-status {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--biru-muda);
            margin-top: 0.5rem;
        }

        .result-card {
            background-color: var(--abu-muda);
            border-radius: 12px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .result-card .card-header {
            font-weight: 600;
            font-size: 1.1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            padding-bottom: 1rem;
        }

        .result-card .card-body p {
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .result-card .card-body p strong {
            display: block;
            margin-bottom: 0.25rem;
            opacity: 0.7;
        }

        .result-card .card-footer {
            margin-top: auto;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }

        .page-actions {
            width: 100%;
            margin-top: 2.5rem;
            display: flex;
            justify-content: flex-end;
        }

        .status-badge {
            padding: 0.3rem 0.8rem;
            border-radius: 1rem;
            font-size: 0.8rem;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }

        .status-badge.sesuai {
            background-color: rgba(0, 255, 144, 0.1);
            color: #00FF90;
        }

        .status-badge.cukup {
            background-color: rgba(255, 199, 0, 0.1);
            color: #FFC700;
        }
    </style>
</head>

<body>
    {{ template "teacher-navbar" . }}

    <main class="main-content">
        <div class="page-header">
            <!-- Header yang sudah diubah agar sesuai dengan gambar -->
            <span class="student-exam-info">{{ .FullName }}Hafidz</span>
            <span class="exam-room-name">{{ .ExamName }}XX1</span>
        </div>

        <section class="score-summary">
            <div class="score-circle-container" id="score-circle">
                <div class="score-circle-inner">
                    <div class="score-text">
                        <div class="score-value">
                            <span id="score-number">0</span><span>/100</span>
                        </div>
                        <p class="score-status" id="score-status-text">Bagus!</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="exam-grid" id="results-container">
        </section>

        <div class="page-actions">
            <a href="/" class="action-button">Selesai</a>
        </div>
    </main>

    <script>
        lucide.createIcons();

        document.addEventListener('DOMContentLoaded', function () {
            // DUMMY DATA
            const quizResults = [
                { no: 1, soal: "Apa itu Cloud Computing?", jawabanBenar: "Cloud computing adalah pengiriman sumber daya komputasi seperti server, penyimpanan, database, dan perangkat lunak melalui internet...", jawabanAnda: "Kita bisa simpan dan akses data secara online.", status: "sesuai", nilai: 20 },
                { no: 2, soal: "Jelaskan konsep API.", jawabanBenar: "API adalah seperangkat aturan yang memungkinkan aplikasi berbeda untuk berkomunikasi satu sama lain...", jawabanAnda: "Jembatan antar aplikasi.", status: "sesuai", nilai: 20 },
                { no: 3, soal: "Perbedaan UI dan UX?", jawabanBenar: "UI berfokus pada tampilan visual, sementara UX berfokus pada keseluruhan pengalaman pengguna...", jawabanAnda: "UI itu tampilan, UX itu rasanya.", status: "cukup", nilai: 10 },
                { no: 4, soal: "Fungsi CSS Flexbox?", jawabanBenar: "CSS Flexbox adalah model tata letak satu dimensi untuk mendistribusikan ruang di antara item...", jawabanAnda: "Untuk mengatur posisi elemen.", status: "sesuai", nilai: 20 },
                { no: 5, soal: "Apa itu Git?", jawabanBenar: "Git adalah sistem kontrol versi terdistribusi untuk melacak perubahan pada kode sumber...", jawabanAnda: "Untuk menyimpan kode online.", status: "sesuai", nilai: 20 }
            ];

            const resultsContainer = document.getElementById('results-container');
            const scoreNumberEl = document.getElementById('score-number');
            const scoreCircleEl = document.getElementById('score-circle');

            function renderResultCards() {
                let cardsHTML = '';
                quizResults.forEach(result => {
                    let statusText = result.status.charAt(0).toUpperCase() + result.status.slice(1);
                    let icon = result.status === 'sesuai' ? '✔' : '⚠';

                    cardsHTML += `
                        <article class="result-card">
                            <div class="card-header">Pertanyaan ${result.no}</div>
                            <div class="card-body">
                                <p><strong>Soal :</strong>${result.soal}</p>
                                <p><strong>Jawaban Benar :</strong>${result.jawabanBenar}</p>
                                <p><strong>Jawaban Anda :</strong>${result.jawabanAnda}</p>
                            </div>
                            <div class="card-footer">
                                <span class="status-badge ${result.status}">${icon} ${statusText}</span>
                                <span class="score">${result.nilai}/20</span>
                            </div>
                        </article>
                    `;
                });
                resultsContainer.innerHTML = cardsHTML;
            }

            function animateScore() {
                const finalScore = quizResults.reduce((total, result) => total + result.nilai, 0);
                let currentScore = 0;

                const animationInterval = setInterval(() => {
                    currentScore++;
                    scoreNumberEl.textContent = currentScore;
                    const progressDegrees = (currentScore / 100) * 360;
                    scoreCircleEl.style.setProperty('--progress-value', `${progressDegrees}deg`);
                    if (currentScore >= finalScore) {
                        clearInterval(animationInterval);
                    }
                }, 20);
            }

            renderResultCards();
            animateScore();
        });
    </script>
</body>

</html>
{{ end }}